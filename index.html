<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trash Sorting Game</title>
    <style>
        body { font-family: Arial, sans-serif; }
        canvas { background: #eaeaea; display: block; margin: auto; }
    </style>
</head>
<body>
    <h1>Trash Sorting Game</h1>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const CAN_DURATION = 2000;
        const BOTTLE_DURATION = 2500;
        const BATTERY_DURATION = 3000;

        let score = 0;
        let timer = 60;
        let gameInterval;

        const items = [];

        class Item {
            constructor(type) {
                this.type = type;
                this.x = Math.random() * (canvas.width - 50);
                this.y = 0;
                this.speed = Math.random() * 2 + 1;
            }

            update() {
                this.y += this.speed;
                if (this.y > canvas.height) {
                    items.splice(items.indexOf(this), 1);
                }
            }

            draw() {
                ctx.fillStyle = this.type === 'can' ? 'green' : this.type === 'bottle' ? 'blue' : 'grey';
                ctx.fillRect(this.x, this.y, 50, 50);
            }
        }

        function spawnItem() {
            const rand = Math.random();
            let type;
            if (rand < 0.33) type = 'can';
            else if (rand < 0.66) type = 'bottle';
            else type = 'battery';
            items.push(new Item(type));
        }

        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            items.forEach(item => {
                item.update();
                item.draw();
            });
            if (timer <= 0) {
                clearInterval(gameInterval);
                alert(`Game Over! Your score: ${score}`);
                return;
            }
            timer--;
        }

        function moveItem(event) {
            let selectedItem = items[items.length - 1];
            if (!selectedItem) return;
            if (event.key === 'ArrowLeft' && selectedItem.type === 'can') {
                score += 1;
                items.splice(items.indexOf(selectedItem), 1);
            } else if (event.key === 'ArrowRight' && selectedItem.type === 'bottle') {
                score += 1;
                items.splice(items.indexOf(selectedItem), 1);
            } else if (event.key === 'ArrowDown' && selectedItem.type === 'battery') {
                score += 1;
                items.splice(items.indexOf(selectedItem), 1);
            }
        }

        window.addEventListener('keydown', moveItem);
        const timerInterval = setInterval(spawnItem, [CAN_DURATION, BOTTLE_DURATION, BATTERY_DURATION][Math.floor(Math.random() * 3)]);
        gameInterval = setInterval(updateGame, 1000);
        setTimeout(() => { clearInterval(timerInterval); }, 60000);
    </script>
</body>
</html>